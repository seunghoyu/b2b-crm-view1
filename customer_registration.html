<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>B2B CRM 신규 고객 등록</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-blue-50 min-h-screen flex">
  <!-- ✅ 좌측 사이드 메뉴 (대시보드와 동일) -->
  <aside class="w-[230px] bg-blue-800 text-white flex-shrink-0">
    <a href="b2b_dashboard_tailwind.html" class="block p-5 text-lg font-semibold border-b border-blue-700 hover:bg-blue-700 transition">
      B2B CRM 메뉴
    </a>

    <nav class="p-3 space-y-2">
      <!-- 통합메뉴 -->
      <div>
        <button id="menuToggle1" class="w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-blue-700 transition">
          <span>발송관리</span>
          <span>▼</span>
        </button>
        <div id="menu1" class="hidden ml-4 mt-2 space-y-1 text-sm">
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">SMS 발송</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">E-Mail 발송</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">알림톡 발송</a>
        </div>
      </div>

      <!-- 관리메뉴 -->
      <div>
        <button id="menuToggle2" class="w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-blue-700 transition">
          <span>관리메뉴</span>
          <span>▼</span>
        </button>
        <div id="menu2" class="ml-4 mt-2 space-y-1 text-sm">
          <a href="b2b_dashboard_tailwind.html" class="block px-3 py-1 hover:bg-blue-700 rounded">상담 현황</a>
          <a href="customer_list.html" class="block px-3 py-1 hover:bg-blue-700 rounded">고객 목록</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">수강시간 조회</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">학습상담·CS 관리</a>
          <a href="customer_registration.html" class="block px-3 py-1 bg-blue-900 rounded font-semibold">신규 고객 등록</a>
        </div>
      </div>
    </nav>
  </aside>

  <!-- ✅ 메인 영역 -->
  <div class="flex-1 flex flex-col relative">
    <!-- ✅ 상단 고정: 응대 내용 입력 -->
    <header class="sticky top-0 bg-white shadow p-5 z-10">
      <div class="w-full">
        <h2 class="text-xl font-semibold text-gray-800 border-b pb-4 mb-6">응대 내용</h2>
        <div class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <select id="categoryMain" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400">
              <option value="">대분류 선택</option>
              <option value="수강·결제">수강·결제</option>
              <option value="수강환경·접속">수강환경·접속</option>
              <option value="학습진행·평가">학습진행·평가</option>
              <option value="강의·강사">강의·강사</option>
              <option value="기타·제휴">기타·제휴</option>
            </select>
            <select id="categorySub" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400 disabled:bg-gray-100 disabled:cursor-not-allowed" disabled>
              <option value="">중분류 선택</option>
            </select>
          </div>
          <div class="flex space-x-4">
            <input type="text" placeholder="제목을 입력하세요" class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400" />
            <textarea placeholder="응대 내용을 입력하세요..." class="flex-1 border border-gray-300 rounded-lg px-3 py-2 h-12 focus:ring-blue-400 focus:outline-none"></textarea>
          </div>
        </div>
      </div>
    </header>

    <!-- ✅ 메인: 신규 고객 정보 입력 -->
    <main class="flex-1 p-8">
      <section class="bg-white p-8 rounded-xl shadow">
        <h2 class="text-xl font-semibold text-gray-800 border-b pb-4 mb-6">신규 고객 정보 등록</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
          <div>
            <label for="company" class="text-sm font-medium text-gray-700">기업명</label>
            <input type="text" id="company" placeholder="예: 해커스" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none" />
          </div>
          <div>
            <label for="manager" class="text-sm font-medium text-gray-700">영업담당자</label>
            <select id="manager" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none">
              <option>담당자 선택</option>
              <option>박지현</option>
              <option>이현우</option>
              <option>김영희</option>
              <option>이하윤</option>
            </select>
          </div>
          <div>
            <label for="contact-name" class="text-sm font-medium text-gray-700">담당자 이름</label>
            <input type="text" id="contact-name" placeholder="예: 홍길동" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none" />
          </div>
          <div>
            <label for="contact-id" class="text-sm font-medium text-gray-700">아이디</label>
            <input type="text" id="contact-id" placeholder="예: hackers01" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none" />
          </div>
          <div>
            <label for="position" class="text-sm font-medium text-gray-700">직책</label>
            <input type="text" id="position" placeholder="예: 대리" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none" />
          </div>
          <div>
            <label for="member-type" class="text-sm font-medium text-gray-700">회원구분</label>
            <select id="member-type" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none">
              <option>구분 선택</option>
              <option>기업관리자</option>
              <option>교육담당자</option>
              <option>기업운영자</option>
              <option>기업 자체 고객사</option>
            </select>
          </div>
          <div class="md:col-span-2">
            <label for="phone" class="text-sm font-medium text-gray-700">연락처</label>
            <input type="text" id="phone" placeholder="'-' 없이 숫자만 입력" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none" />
          </div>
        </div>
      </section>
    </main>

    <!-- 하단 버튼 영역 -->
    <footer class="bg-white px-5 py-4 shadow-inner flex justify-end items-center border-t sticky bottom-0">
      <button onclick="window.location.href='customer_list.html'" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition font-semibold mr-3">
        취소
      </button>
      <button class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-semibold">
        등록하기
      </button>
    </footer>
  </div>
  
  <script>
    // ✅ 사이드메뉴 토글 (대시보드와 동일)
    const menuToggle1 = document.getElementById("menuToggle1");
    const menu1 = document.getElementById("menu1");
    const menuToggle2 = document.getElementById("menuToggle2");
    const menu2 = document.getElementById("menu2");

    menuToggle1.addEventListener("click", () => menu1.classList.toggle("hidden"));
    menuToggle2.addEventListener("click", () => menu2.classList.toggle("hidden"));
    menu2.classList.remove("hidden"); // 관리메뉴는 기본으로 열어둠 

    // 🔹 대분류-중분류 연동 기능 (customer_view.html 에서 복사)
    const categoryMap = {
      "수강·결제": ["결제오류", "환불문의", "영수증발급", "할인문의", "결제방법"],
      "수강환경·접속": ["로그인문제", "비밀번호찾기", "계정오류", "접속불가", "브라우저문제"],
      "학습진행·평가": ["진도율문의", "시험응시", "과제제출", "수료증발급", "성적문의"],
      "강의·강사": ["강사평가", "강의내용", "강의자료", "강의오류", "강의요청"],
      "기타·제휴": ["제휴문의", "견적문의", "단체문의", "기타", "건의사항"]
    };

    const categoryMainSelect = document.getElementById("categoryMain");
    const categorySubSelect = document.getElementById("categorySub");

    // 대분류 선택 시 중분류 업데이트
    categoryMainSelect.addEventListener("change", function() {
      const selectedMain = this.value;
      categorySubSelect.innerHTML = '<option value="">중분류 선택</option>'; 
      
      if (selectedMain && categoryMap[selectedMain]) {
        categoryMap[selectedMain].forEach(sub => {
          const option = document.createElement("option");
          option.value = sub;
          option.textContent = sub;
          categorySubSelect.appendChild(option);
        });
        categorySubSelect.disabled = false;
      } else {
        categorySubSelect.disabled = true;
      }
    });
  </script>
</body>

</html>
</html>