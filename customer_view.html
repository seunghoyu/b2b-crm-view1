<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>B2B CRM ê³ ê°ì¡°íšŒ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-blue-50 h-screen flex overflow-hidden">
  <!-- âœ… ì¢Œì¸¡ ì‚¬ì´ë“œ ë©”ë‰´ -->
  <aside class="w-[230px] bg-blue-800 text-white flex-shrink-0">
    <a href="b2b_dashboard_tailwind.html" class="block p-5 text-lg font-semibold border-b border-blue-700 hover:bg-blue-700 transition">
      B2B CRM ë©”ë‰´
    </a>

    <nav class="p-3 space-y-2">
      <!-- í†µí•©ë©”ë‰´ -->
      <div>
        <button id="menuToggle1" class="w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-blue-700 transition">
          <span>ë°œì†¡ê´€ë¦¬</span>
          <span>â–¼</span>
        </button>
        <div id="menu1" class="hidden ml-4 mt-2 space-y-1 text-sm">
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">SMS ë°œì†¡</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">E-Mail ë°œì†¡</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">ì•Œë¦¼í†¡ ë°œì†¡</a>
        </div>
      </div>

      <!-- ê´€ë¦¬ë©”ë‰´ -->
      <div>
        <button id="menuToggle2" class="w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-blue-700 transition">
          <span>ê´€ë¦¬ë©”ë‰´</span>
          <span>â–¼</span>
        </button>
        <div id="menu2" class="ml-4 mt-2 space-y-1 text-sm">
          <a href="b2b_dashboard_tailwind.html" class="block px-3 py-1 hover:bg-blue-700 rounded">ìƒë‹´ í˜„í™©</a>
          <a href="company_list.html" class="block px-3 py-1 hover:bg-blue-700 rounded">ê¸°ì—… ëª©ë¡</a>
          <a href="customer_list.html" class="block px-3 py-1 hover:bg-blue-700 rounded">ê³ ê° ëª©ë¡</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">ìˆ˜ê°•ì‹œê°„ ì¡°íšŒ</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">í•™ìŠµìƒë‹´Â·CS ê´€ë¦¬</a>
          <a href="customer_registration.html" class="block px-3 py-1 hover:bg-blue-700 rounded">ì‹ ê·œ ê³ ê° ë“±ë¡</a>
        </div>
      </div>
    </nav>
  </aside>

  <!-- âœ… ë³¸ë¬¸ ì „ì²´ -->
  <div class="flex-1 flex flex-col">
    <!-- âœ… ìƒë‹¨ ê³ ì •: ì‘ëŒ€ì…ë ¥ -->
    <header class="sticky top-0 bg-white shadow p-5 z-10">
      <div class="w-full">
        <h2 class="text-xl font-semibold text-gray-800 border-b pb-4 mb-6">ì‘ëŒ€ ë‚´ìš© ì…ë ¥</h2>
        <div class="grid grid-cols-4 gap-4 mb-4">
          <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400">
            <option>ë‹´ë‹¹ì ì„ íƒ</option>
            <option>í™ê¸¸ë™</option>
            <option>ì´í˜„ìš°</option>
            <option>ë°•ì§€í˜„</option>
          </select>
          <select id="statusSelect" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400">
            <option>ì²˜ë¦¬ìƒíƒœ ì„ íƒ</option>
            <option value="ì²˜ë¦¬ëŒ€ê¸°" class="text-red-600 font-semibold">ì²˜ë¦¬ëŒ€ê¸°</option>
            <option value="ì²˜ë¦¬ì™„ë£Œ" class="text-green-600 font-semibold">ì²˜ë¦¬ì™„ë£Œ</option>
          </select>
          <select id="categoryMain" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400">
            <option value="">ëŒ€ë¶„ë¥˜ ì„ íƒ</option>
            <option value="ìˆ˜ê°•Â·ê²°ì œ">ìˆ˜ê°•Â·ê²°ì œ</option>
            <option value="ìˆ˜ê°•í™˜ê²½Â·ì ‘ì†">ìˆ˜ê°•í™˜ê²½Â·ì ‘ì†</option>
            <option value="í•™ìŠµì§„í–‰Â·í‰ê°€">í•™ìŠµì§„í–‰Â·í‰ê°€</option>
            <option value="ê°•ì˜Â·ê°•ì‚¬">ê°•ì˜Â·ê°•ì‚¬</option>
            <option value="ê¸°íƒ€Â·ì œíœ´">ê¸°íƒ€Â·ì œíœ´</option>
          </select>
          <select id="categorySub" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-400 disabled:bg-gray-100 disabled:cursor-not-allowed" disabled>
            <option value="">ì¤‘ë¶„ë¥˜ ì„ íƒ</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <textarea placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." class="border border-gray-300 rounded-lg px-3 py-2 w-full h-24 focus:ring-blue-400 focus:outline-none"></textarea>
          <div class="flex flex-col space-y-2">
            <input type="text" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full border border-blue-300 bg-blue-50 rounded-lg px-3 py-2 text-sm focus:ring-blue-400 placeholder:font-medium" />
            <textarea placeholder="ì‘ëŒ€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." class="border border-gray-300 rounded-lg px-3 py-2 w-full flex-1 focus:ring-blue-400 focus:outline-none"></textarea>
          </div>
        </div>
      </div>
    </header>

    <main class="flex-1 overflow-y-auto p-6 space-y-8">
      <!-- âœ… ê³ ê° ì •ë³´ & ê¸°ëŠ¥ ë©”ë‰´ -->
      <section class="bg-white rounded-xl shadow p-5">
        <div class="flex justify-between items-start">
          <!-- ê³ ê° ì •ë³´ -->
          <div class="w-2/3 pr-4">
            <h2 class="text-lg font-semibold">
              LGí™”í•™ / ê¹€í•´ì»¤ (2025-09-25 17:30:56)
            </h2>
            <p class="text-sm text-gray-500 mb-2">ìƒë‹´ì: í™ê¸¸ë™ (ì˜ì—…íŒ€)</p>
            <div class="mt-4 text-sm text-gray-800 space-y-4">
              <!-- 3ì—´ ê·¸ë¦¬ë“œ -->
              <div class="grid grid-cols-3">
                <!-- 1ì—´: ê¸°ì—…ì •ë³´ -->
                <div>
                  <h4 class="font-bold text-blue-600">[ê¸°ì—…ì •ë³´]</h4>
                  <div class="mt-2 border-t border-l border-gray-200">
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">íšŒì›êµ¬ë¶„</span><span class="p-2 border-b border-gray-200">ê¸°ì—…ê´€ë¦¬ì</span></div>
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ê¸°ì—…ì½”ë“œ</span><span class="p-2 border-b border-gray-200">lgchem</span></div>
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ê¸°ì—…ëª…</span><span class="p-2 border-b border-gray-200">LGí™”í•™</span></div>
                  </div>
                </div>
                <!-- 2ì—´: ê³ ê°ì •ë³´ -->
                <div>
                  <h4 class="font-bold text-blue-600">[ê³ ê°ì •ë³´]</h4>
                  <div class="mt-2 border-t border-l border-gray-200">
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ì´ë¦„</span><span class="p-2 border-b border-gray-200">ê¹€í•´ì»¤</span></div>
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ì•„ì´ë””</span><span class="p-2 border-b border-gray-200">lgchem01</span></div>
                    <div class="grid grid-cols-[80px_1fr]"><span id="customer-phone" class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ì „í™”ë²ˆí˜¸</span><span class="p-2 border-b border-gray-200">010-1234-5678</span></div>
                  </div>
                </div>
                <!-- 3ì—´: êµ¬ë¶„ -->
                <div>
                  <h4 class="font-bold text-blue-600">[êµ¬ë¶„]</h4>
                  <div class="mt-2 border-t border-l border-r border-gray-200">
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ëŒ€ë¶„ë¥˜</span><span class="p-2 border-b border-gray-200">ìˆ˜ê°•Â·ê²°ì œ</span></div>
                    <div class="grid grid-cols-[80px_1fr]"><span class="p-2 font-semibold bg-gray-50 border-r border-b border-gray-200">ì¤‘ë¶„ë¥˜</span><span class="p-2 border-b border-gray-200">ê²°ì œì˜¤ë¥˜</span></div>
                  </div>
                </div>
              </div>

              <!-- ë‚´ë¶€ì •ë³´ -->
              <div class="pt-4">
                <h4 class="font-bold text-blue-600">[ë‚´ë¶€ì •ë³´]</h4>
                <div class="grid grid-cols-3 mt-2">
                  <div class="grid grid-cols-[96px_1fr] border-t border-l border-b border-gray-200"><span class="p-2 font-semibold bg-gray-50 border-r border-gray-200">ì˜ì—… ë‹´ë‹¹ì</span><span class="p-2">ë°•ì§€í˜„</span></div>
                  <div class="grid grid-cols-[96px_1fr] border-t border-l border-b border-gray-200"><span class="p-2 font-semibold bg-gray-50 border-r border-gray-200">ìš´ì˜ ë‹´ë‹¹ì</span><span class="p-2">ê¹€ë¯¼ì¤€</span></div>
                  <div class="border-t border-b border-r border-gray-200"></div>
                </div>
              </div>

            </div>
          </div>
          <!-- ê¸°ëŠ¥ ë©”ë‰´ -->
          <div class="w-1/3 pl-4 border-l">
            <h3 class="font-semibold text-lg mb-3 text-blue-700">ê¸°ëŠ¥ ë©”ë‰´</h3>
            <div class="space-y-2 text-sm">
              <div class="grid grid-cols-2 gap-2">
              <button id="menuUserInfo" class="w-full text-center px-4 py-2 rounded-lg bg-blue-50 hover:bg-blue-100 transition">
                íšŒì› ì •ë³´
              </button>
              <button id="menuDeliveryInfo" class="w-full text-center px-4 py-2 rounded-lg bg-blue-50 hover:bg-blue-100 transition">
                ë°°ì†¡ì§€ ì •ë³´
              </button>
              </div>
              <div class="grid grid-cols-2 gap-2">
              <button id="menuAdminSite" class="w-full text-center px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition">
                ê´€ë¦¬ì ë¡œê·¸ì¸
              </button>
              <button id="menuUserSite" class="w-full text-center px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition">
                í•™ìŠµìID ë¡œê·¸ì¸
              </button>
              <button id="menuSendSms" class="w-full text-center px-4 py-2 rounded-lg bg-blue-50 hover:bg-blue-100 transition">ë¬¸ì ì „ì†¡</button>
              <button id="menuSendEmail" class="w-full text-center px-4 py-2 rounded-lg bg-blue-50 hover:bg-blue-100 transition">ì´ë©”ì¼ ì „ì†¡</button>
            </div>
          </div>
        </div>

      </section>

      <!-- âœ… ìƒë‹´ì´ë ¥ -->
      <section class="bg-white rounded-xl shadow p-5 flex space-x-6 h-[500px]">
        <!-- âœ… ì¢Œì¸¡: ìƒë‹´ ëª©ë¡ -->
        <div class="w-1/2 flex flex-col">
          <h3 class="font-semibold text-lg mb-3 text-blue-700">ìƒë‹´ì´ë ¥</h3>
          <div class="overflow-x-auto overflow-y-auto flex-1">
            <table class="w-full text-sm border-collapse table-auto">
              <thead class="bg-blue-100 text-gray-700">
                <tr>
                  <th class="p-3">ìƒë‹´ì¼ì‹œ</th>
                  <th class="p-3">ìƒë‹´ì±„ë„</th>
                  <th class="p-3">ì œëª©</th>
                  <th class="p-3">ì§„í–‰ìƒíƒœ</th>
                  <th class="p-3">ë‹´ë‹¹ì</th>
                </tr>
              </thead>
              <tbody id="history-body"></tbody>
            </table>
          </div>
          <button id="history-more"
            class="hidden mt-3 bg-blue-100 text-blue-600 px-3 py-1 rounded hover:bg-blue-200 text-sm">
            ë”ë³´ê¸°
          </button>
        </div>

        <!-- âœ… ìš°ì¸¡: ìƒë‹´ ìƒì„¸ë³´ê¸° -->
        <div id="history-detail"
          class="w-1/2 hidden bg-blue-50 rounded-lg p-4 border border-blue-200 overflow-y-auto">
          <p class="text-gray-500 text-sm text-center">ìƒë‹´ ë‚´ì—­ì„ ì„ íƒí•˜ì„¸ìš”.</p>
        </div>
      </section>



      <!-- âœ… í•™ìŠµê´€ë¦¬ -->
      <section class="bg-white rounded-xl shadow p-5 flex flex-col max-h-[500px]">
        <h3 class="font-semibold text-lg mb-3 text-blue-700">í•™ìŠµê´€ë¦¬</h3>

        <div class="overflow-x-auto overflow-y-auto flex-1">
          <table class="w-full text-sm border-collapse table-auto">
            <thead class="bg-blue-100 text-gray-700">
              <tr>
                <th class="p-3">í•™ìŠµì°¨ìˆ˜</th>
                <th class="p-3">ê°•ì˜ì½”ë“œ</th>
                <th class="p-3">ê°•ì˜ëª…</th>
                <th class="p-3">êµìœ¡ê¸°ê°„</th>
                <th class="p-3">ë³µìŠµê¸°ê°„</th>
                <th class="p-3">ì¶œì„ë¥ </th>
                <th class="p-3">ì¶œì„ì ìˆ˜</th>
                <th class="p-3">ì‹œí—˜ì ìˆ˜</th>
                <th class="p-3">ëª¨ì˜ê³ ì‚¬ ì ìˆ˜</th>
                <th class="p-3">ë ˆë²¨ì ìˆ˜</th>
                <th class="p-3">ë“±ê¸‰</th>
                <th class="p-3">ìˆ˜ë£Œì—¬ë¶€</th>
                <th class="p-3">ê¸°ì¤€ìˆ˜ë£Œì ìˆ˜</th>
                <th class="p-3">ê°•ì˜ì œê³µì—…ì²´</th>
                <th class="p-3">ë“±ë¡ì¼</th>
              </tr>
            </thead>
            <tbody id="study-body"></tbody>
          </table>
        </div>

        <p id="study-empty" class="hidden text-gray-500 text-sm mt-4 text-center">
          ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
        </p>

        <button id="study-more"
          class="hidden mt-3 bg-blue-100 text-blue-600 px-3 py-1 rounded hover:bg-blue-200 text-sm">
          ë”ë³´ê¸°
        </button>
      </section>




      <!-- âœ… ë°°ì†¡ê´€ë¦¬ -->
      <section class="bg-white rounded-xl shadow p-5 flex flex-col max-h-[500px]">
        <h3 class="font-semibold text-lg mb-3 text-blue-700">ë°°ì†¡ê´€ë¦¬</h3>

        <!-- âœ… ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°ì‹¸ê¸° -->
        <div class="overflow-x-auto overflow-y-auto flex-1">
          <table class="w-full text-sm border-collapse table-auto">
            <thead class="bg-blue-100 text-gray-700">
              <tr>
                <th class="p-3">ì£¼ë¬¸ì¼</th>
                <th class="p-3">ì£¼ë¬¸ë²ˆí˜¸</th>
                <th class="p-3">êµì¬ëª…</th>
                <th class="p-3">ì£¼ë¬¸ì•¡</th>
                <th class="p-3">ì„œì  ì£¼ë¬¸ë²ˆí˜¸</th>
                <th class="p-3">íƒë°°ì‚¬</th>
                <th class="p-3">ì†¡ì¥ë²ˆí˜¸</th>
                <th class="p-3">ì£¼ë¬¸ìƒíƒœ</th>
                <th class="p-3">ê²°ì œì¼</th>
                <th class="p-3">ë°°ì†¡ë°©ë²•</th>
              </tr>
            </thead>
            <tbody id="delivery-body"></tbody>
          </table>
        </div>

        <!-- âœ… ë°ì´í„° ì—†ì„ ë•Œ í‘œì‹œ -->
        <p id="delivery-empty" class="hidden text-gray-500 text-sm mt-4 text-center">
          ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
        </p>

        <button id="delivery-more"
          class="hidden mt-3 bg-blue-100 text-blue-600 px-3 py-1 rounded hover:bg-blue-200 text-sm">
          ë”ë³´ê¸°
        </button>
      </section>


      <!-- âœ… ëª¨ë‹¬ êµ¬ì¡° -->
      <div id="modalOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
        <div class="bg-white rounded-xl shadow-2xl w-[750px] max-h-[80vh] overflow-y-auto p-6 relative border-4 border-blue-300">
          <h3 id="modalTitle" class="text-2xl font-bold text-blue-700 mb-4 pb-2 border-b-2 border-blue-200">
            ì •ë³´ ë³´ê¸°
          </h3>
          <div id="modalContent" class="text-sm text-gray-700"></div>
          <div class="flex justify-end mt-6 space-x-3">
            <button id="saveBtn" class="hidden bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md">
              ì €ì¥í•˜ê¸°
            </button>
            <button id="closeBtn" class="bg-gray-400 text-white px-5 py-2 rounded-lg hover:bg-gray-500 transition font-semibold shadow-md">
              ë‹«ê¸°
            </button>
          </div>
        </div>
      </div>

      <!-- âœ… í•™ìŠµê´€ë¦¬ ì „ìš© ëª¨ë‹¬ -->
      <div id="studyActionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
        <div class="bg-white rounded-xl shadow-2xl w-96 p-6 relative border-4 border-blue-300">
          <h3 class="text-xl font-bold text-blue-700 mb-6 text-center">í•™ìŠµ ê´€ë¦¬</h3>
          <div class="space-y-3">
            <button onclick="alert('ì‹œí—˜ ì¬ì‘ì‹œ ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.')" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-gray-100 transition font-semibold shadow-sm text-lg">
              ì‹œí—˜ ì¬ì‘ì‹œ
            </button>
            <button onclick="alert('ìˆ˜ê°•ê¸°ê°„ ì—°ì¥ ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.')" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-gray-100 transition font-semibold shadow-sm text-lg">
              ìˆ˜ê°•ê¸°ê°„ ì—°ì¥
            </button>
            <button onclick="alert('ì—°ì¥ ì´ˆê¸°í™” ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.')" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-gray-100 transition font-semibold shadow-sm text-lg">
              ì—°ì¥ ì´ˆê¸°í™”
            </button>
            <button onclick="alert('í‰ê°€ì‹œí—˜ì°½ ì¬ì§„ì… ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.')" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-gray-100 transition font-semibold shadow-sm text-lg">
              í‰ê°€ì‹œí—˜ì°½ ì¬ì§„ì…
            </button>
            <button onclick="alert('ì‚­ì œ ê¸°ëŠ¥ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.')" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-red-500 hover:text-white transition font-semibold shadow-sm text-lg">
              ì‚­ì œ
            </button>
          </div>
          <button id="closeStudyModalBtn" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
        </div>
      </div>

      <!-- âœ… ë¬¸ì ë°œì†¡ ëª¨ë‹¬ -->
      <div id="smsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] overflow-y-auto p-6 relative border-4 border-blue-300 flex space-x-6">
          <!-- ì¢Œì¸¡: í…œí”Œë¦¿ ëª©ë¡ -->
          <div class="w-1/2 flex flex-col">
            <h3 class="text-xl font-bold text-blue-700 mb-4">ë¬¸ì í…œí”Œë¦¿</h3>
            <input type="text" id="templateSearch" placeholder="í…œí”Œë¦¿ ì œëª© ê²€ìƒ‰..." class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-3 text-sm focus:ring-blue-400 focus:outline-none">
            <div class="flex-1 overflow-y-auto border rounded-lg">
              <table class="w-full text-sm">
                <thead class="bg-gray-100">
                  <tr>
                    <th class="p-2 w-16">ì—°ë²ˆ</th>
                    <th class="p-2 text-left">í…œí”Œë¦¿ ì œëª©</th>
                  </tr>
                </thead>
                <tbody id="smsTemplateBody"></tbody>
              </table>
            </div>
            <div id="templatePagination" class="flex justify-center items-center mt-3 space-x-2 text-sm"></div>
          </div>
          <!-- ìš°ì¸¡: ë°œì†¡ ì •ë³´ -->
          <div class="w-1/2">
            <h3 class="text-xl font-bold text-blue-700 mb-4">ë°œì†¡ ë‚´ìš©</h3>
            <div class="space-y-4 text-sm">
              <div><label class="font-semibold">ë°œì‹ ë²ˆí˜¸</label><input type="text" id="smsSender" value="02-000-0000" class="w-full mt-1 bg-gray-100 border border-gray-300 rounded-lg px-3 py-2" readonly></div>
              <div><label class="font-semibold">ìˆ˜ì‹ ë²ˆí˜¸</label><input type="text" id="smsReceiver" class="w-full mt-1 bg-gray-100 border border-gray-300 rounded-lg px-3 py-2" readonly></div>
              <div><label class="font-semibold">ë‚´ìš©</label><textarea id="smsContent" rows="10" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-400 focus:outline-none" placeholder="ë¬¸ì ë‚´ìš©ì„ ì…ë ¥í•˜ê±°ë‚˜ í…œí”Œë¦¿ì„ ì„ íƒí•˜ì„¸ìš”."></textarea></div>
            </div>
            <div class="flex justify-end mt-6 space-x-3"><button id="sendSmsBtn" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition font-semibold">ë°œì†¡í•˜ê¸°</button><button id="closeSmsModalBtn" class="bg-gray-400 text-white px-5 py-2 rounded-lg hover:bg-gray-500 transition font-semibold">ë‹«ê¸°</button></div>
          </div>
        </div>
      </div>

      <!-- âœ… ì´ë©”ì¼ ì „ì†¡ ëª¨ë‹¬ -->
      <div id="emailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
        <div class="bg-white rounded-xl shadow-2xl w-96 p-6 relative border-4 border-blue-300">
          <h3 class="text-xl font-bold text-blue-700 mb-6 text-center">ì´ë©”ì¼ ì „ì†¡</h3>
          <div class="space-y-3">
            <button id="sendWebmail" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-gray-100 transition font-semibold shadow-sm text-lg">
              ì›¹ë©”ì¼ (Biz)
            </button>
            <button id="sendPassmail" class="w-full bg-white border border-gray-300 text-gray-800 px-5 py-3 rounded-lg hover:bg-gray-100 transition font-semibold shadow-sm text-lg">
              íŒ¨ìŠ¤ë©”ì¼ (fnBiz)
            </button>
          </div>
          <button id="closeEmailModalBtn" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
        </div>
      </div>

      <script>
        // âœ… ì‚¬ì´ë“œë©”ë‰´ í† ê¸€ (ë‹¤ë¥¸ í˜ì´ì§€ì™€ ë™ì¼)
        const menuToggle1 = document.getElementById("menuToggle1");
        const menu1 = document.getElementById("menu1");
        const menuToggle2 = document.getElementById("menuToggle2");
        const menu2 = document.getElementById("menu2");

        menuToggle1.addEventListener("click", () => menu1.classList.toggle("hidden"));
        menuToggle2.addEventListener("click", () => menu2.classList.toggle("hidden"));
        menu2.classList.remove("hidden"); // ê´€ë¦¬ë©”ë‰´ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì—´ì–´ë‘ 

        // ğŸ”¹ ëŒ€ë¶„ë¥˜-ì¤‘ë¶„ë¥˜ ì—°ë™ ê¸°ëŠ¥
        const categoryMap = {
          "ìˆ˜ê°•Â·ê²°ì œ": ["ê²°ì œì˜¤ë¥˜", "í™˜ë¶ˆë¬¸ì˜", "ì˜ìˆ˜ì¦ë°œê¸‰", "í• ì¸ë¬¸ì˜", "ê²°ì œë°©ë²•"],
          "ìˆ˜ê°•í™˜ê²½Â·ì ‘ì†": ["ë¡œê·¸ì¸ë¬¸ì œ", "ë¹„ë°€ë²ˆí˜¸ì°¾ê¸°", "ê³„ì •ì˜¤ë¥˜", "ì ‘ì†ë¶ˆê°€", "ë¸Œë¼ìš°ì €ë¬¸ì œ"],
          "í•™ìŠµì§„í–‰Â·í‰ê°€": ["ì§„ë„ìœ¨ë¬¸ì˜", "ì‹œí—˜ì‘ì‹œ", "ê³¼ì œì œì¶œ", "ìˆ˜ë£Œì¦ë°œê¸‰", "ì„±ì ë¬¸ì˜"],
          "ê°•ì˜Â·ê°•ì‚¬": ["ê°•ì‚¬í‰ê°€", "ê°•ì˜ë‚´ìš©", "ê°•ì˜ìë£Œ", "ê°•ì˜ì˜¤ë¥˜", "ê°•ì˜ìš”ì²­"],
          "ê¸°íƒ€Â·ì œíœ´": ["ì œíœ´ë¬¸ì˜", "ê²¬ì ë¬¸ì˜", "ë‹¨ì²´ë¬¸ì˜", "ê¸°íƒ€", "ê±´ì˜ì‚¬í•­"]
        };

        const categoryMainSelect = document.getElementById("categoryMain");
        const categorySubSelect = document.getElementById("categorySub");

        // ëŒ€ë¶„ë¥˜ ì„ íƒ ì‹œ ì¤‘ë¶„ë¥˜ ì—…ë°ì´íŠ¸
        categoryMainSelect.addEventListener("change", function() {
          const selectedMain = this.value;
          categorySubSelect.innerHTML = '<option value="">ì¤‘ë¶„ë¥˜ ì„ íƒ</option>';
          
          if (selectedMain && categoryMap[selectedMain]) {
            categoryMap[selectedMain].forEach(sub => {
              const option = document.createElement("option");
              option.value = sub;
              option.textContent = sub;
              categorySubSelect.appendChild(option);
            });
            categorySubSelect.disabled = false;
          } else {
            categorySubSelect.disabled = true;
          }
        });

        // âœ… ì²˜ë¦¬ìƒíƒœ ë“œë¡­ë‹¤ìš´ ìƒ‰ìƒ ë³€ê²½
        const statusSelect = document.getElementById("statusSelect");
        statusSelect.addEventListener("change", function() {
          // ë¨¼ì € ëª¨ë“  ìƒ‰ìƒ ë° êµµê¸° í´ë˜ìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
          this.classList.remove("text-red-600", "text-green-600", "font-semibold");

          const selectedValue = this.value;

          if (selectedValue === "ì²˜ë¦¬ëŒ€ê¸°") {
            this.classList.add("text-red-600", "font-semibold");
          } else if (selectedValue === "ì²˜ë¦¬ì™„ë£Œ") {
            this.classList.add("text-green-600", "font-semibold");
          }
        });


        // 1ï¸âƒ£ --- ë”ë¯¸ë°ì´í„° (ë§¨ ìœ„ë¡œ ì´ë™í•´ì•¼ í•¨) ---
        
        // âœ… íšŒì› ì •ë³´ ë”ë¯¸ ë°ì´í„°
        const memberData = {
          "ê¸°ì—…": "LGí™”í•™",
          "ì´ë¦„": "ê¹€í•´ì»¤",
          "ì•„ì´ë””": "lgchem01",
          "Password": "ì´ˆê¸°í™”", // ì‹¤ì œ ê°’ ëŒ€ì‹  UI ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°’
          "ê¸°ì—…ì½”ë“œ": "lgchem",
          "ì´ë©”ì¼": "kim.hacker@lgchem.com",
          "ì—°ë½ì²˜(hp)": "010-1234-5678",
          "ì—°ë½ì²˜(home)": "02-3773-1234",
          "ì£¼ì†Œ": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 231",
          "ìƒì„¸ì£¼ì†Œ": "LGí™”í•™ ë³¸ì‚¬ ë¹Œë”© 5ì¸µ",
          "íšŒì›ê°€ì…ì¼": "2023-01-10"
        };

        // âœ… ë°°ì†¡ì§€ ì •ë³´ ë”ë¯¸ ë°ì´í„°
        const deliveryData = {
          "ë°›ëŠ”ì‚¬ëŒ": "ê¹€í•´ì»¤",
          "ì—°ë½ì²˜": "02-3773-1234",
          "í•¸ë“œí°ë²ˆí˜¸": "010-1234-5678",
          "ìš°í¸ë²ˆí˜¸": "06142",
          "ì£¼ì†Œ": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 231",
          "ìƒì„¸ì£¼ì†Œ": "LGí™”í•™ ë³¸ì‚¬ ë¹Œë”© 5ì¸µ",
          "ë°°ì†¡ë¹„ê³ ": "ë¶€ì¬ ì‹œ ê²½ë¹„ì‹¤ì— ë§¡ê²¨ì£¼ì„¸ìš”",
          "ë°°ì†¡ì§€ ì…ë ¥ì¼ì": "2023-01-15"
        };

        // âœ… ë¬¸ì í…œí”Œë¦¿ ë”ë¯¸ ë°ì´í„° (20ê°œ)
        const smsTemplates = Array.from({ length: 20 }, (_, i) => {
            const type = ["ì•ˆë‚´", "ë…ë ¤", "ì´ë²¤íŠ¸", "ê³µì§€"][i % 4];
            let content = "";
            if (type === "ì•ˆë‚´") content = `[í•´ì»¤ìŠ¤] ì•ˆë…•í•˜ì„¸ìš”, {ê³ ê°ëª…}ë‹˜. ìš”ì²­í•˜ì‹  í•™ìŠµ ìƒë‹´ ê´€ë ¨ ì•ˆë‚´ ë“œë¦½ë‹ˆë‹¤.`;
            else if (type === "ë…ë ¤") content = `[í•´ì»¤ìŠ¤] {ê³ ê°ëª…}ë‹˜, í•™ìŠµ ì§„ë„ìœ¨ì´ ëª©í‘œì— ë¯¸ì¹˜ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¡°ê¸ˆë§Œ ë” í˜ë‚´ì£¼ì„¸ìš”!`;
            else if (type === "ì´ë²¤íŠ¸") content = `[í•´ì»¤ìŠ¤] {ê³ ê°ëª…}ë‹˜ì„ ìœ„í•œ íŠ¹ë³„ ì´ë²¤íŠ¸! ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”. (ë§í¬)`;
            else content = `[í•´ì»¤ìŠ¤] ì‹œìŠ¤í…œ ì ê²€ì´ ì˜ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ({ë‚ ì§œ}) ë¶ˆí¸ì„ ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤.`;
            
            return {
                id: i + 1,
                title: `[${type}] í…œí”Œë¦¿ ${i + 1}`,
                content: content,
            };
        });
        
        const historyData = Array.from({ length: 10 }, (_, i) => ({
          channel: i % 2 === 0 ? "1:1 ë¬¸ì˜ê²Œì‹œíŒ" : "ì „í™”ìƒë‹´",
          categoryMain: ["ìˆ˜ê°•Â·ê²°ì œ", "ìˆ˜ê°•í™˜ê²½Â·ì ‘ì†", "í•™ìŠµì§„í–‰Â·í‰ê°€", "ê°•ì˜Â·ê°•ì‚¬", "ê¸°íƒ€Â·ì œíœ´"][i % 5],
          categorySub: ["ê²°ì œì˜¤ë¥˜", "ë¡œê·¸ì¸ë¬¸ì œ", "ì§„ë„ìœ¨ë¬¸ì˜", "ê°•ì‚¬í‰ê°€", "ì œíœ´ë¬¸ì˜"][i % 5],
          date: `2025-09-${String(10 + i).padStart(2, '0')}`,
          datetime: `2025-09-${String(10 + i).padStart(2, '0')} ${String(14 + i).padStart(2, '0')}:${String(20 + (i * 3) % 60).padStart(2, '0')}`,
          title: `ìƒë‹´ í…ŒìŠ¤íŠ¸ ${i + 1}`,
          status: i % 2 === 0 ? "ì²˜ë¦¬ì™„ë£Œ" : "ì²˜ë¦¬ëŒ€ê¸°",
          manager: ["í™ê¸¸ë™", "ì´í˜„ìš°", "ë°•ì§€í˜„"][i % 3],
          detail: {
            reply: i === 0 ? "ì•ˆë…•í•˜ì„¸ìš”. ìƒë‹´ í…ŒìŠ¤íŠ¸ 1ë²ˆì˜ ë‹µë³€ ë‚´ìš©ì…ë‹ˆë‹¤.\në¬¸ì˜ì£¼ì‹  ê²°ì œ ì˜¤ë¥˜ëŠ” í˜„ì¬ ì •ìƒ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì•„ë˜ ê²°ì œì˜¤ë¥˜ í•´ê²°í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.\nB2Bê´€ë¦¬ìë‹¨ > ìˆ˜ê°•ê²°ì œë‚´ì—­ > ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰í•˜ì—¬ ì·¨ì†Œ" : "",
          },
        })).sort((a, b) => new Date(b.datetime) - new Date(a.datetime));

        const studyData = Array.from({ length: 10 }, (_, i) => ({
          round: `2025${10 + i}`,
          code: `LGC${100 + i}`,
          subject: `	[2025 í•˜ë°˜ê¸°] í•œ ë²ˆì— í•©ê²©í•˜ëŠ” ìì†Œì„œ ì‘ì„±ë²• - ëŒ€í•œí•­ê³µ(ì¼ë°˜ì§) ${i + 1}`,
          period: `2025-09-${1 + i} ~ 2025-09-${10 + i}`,
          reviewPeriod: `2025-10-${1 + i} ~ 2025-10-${10 + i}`,
          attend: `${80 + i}%`,
          test: `${70 + i}%`,
          mock: `${75 + i}%`,
          reset: i % 3,
          level: i + 1,
          grade: ["A", "B", "C"][i % 3],
          complete: i % 2 === 0 ? "Y" : "N",
          baseScore: 80,
          provider: "ìì²´ê°•ì˜",
          regDate: `2025-09-${15 + i}`,
        })).sort((a, b) => parseInt(b.round) - parseInt(a.round));

        const newDeliveryData = Array.from({ length: 10 }, (_, i) => ({
          orderDate: `2025-09-${String(10 + i).padStart(2, '0')}`,
          orderNo: `ORD${1000 + i}`,
          book: `ì‚°ì—…ì•ˆì „ êµì¬ ${i + 1}`,
          amount: `${12000 + i * 500}ì›`,
          storeOrder: `BOOK${200 + i}`,
          courier: "CJëŒ€í•œí†µìš´",
          tracking: `12345${i}`,
          status: i % 2 === 0 ? "ë°°ì†¡ì™„ë£Œ" : "ë°°ì†¡ì¤‘",
          payDate: `2025-09-${String(5 + i).padStart(2, '0')}`,
          deliveryMethod: i % 2 === 0 ? "SAP" : "êµë³´ë¬¸ê³ ",
        })).sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));


        // âœ… ëª¨ë‹¬ ì œì–´
        const modalOverlay = document.getElementById("modalOverlay");
        const modalTitle = document.getElementById("modalTitle");
        const modalContent = document.getElementById("modalContent");
        const saveBtn = document.getElementById("saveBtn");
        const closeBtn = document.getElementById("closeBtn");

        function closeModal() {
          // ìˆ˜ì • ëª¨ë“œ í•´ì œ
          document.querySelectorAll(".editable").forEach((td) => {
            td.contentEditable = "false";
            td.classList.remove("bg-yellow-50", "border-2", "border-yellow-400");
          });
          saveBtn.classList.add("hidden");
          modalOverlay.classList.add("hidden");
        }

        closeBtn.addEventListener("click", closeModal);
        
        // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
        modalOverlay.addEventListener("click", (e) => {
          if (e.target === modalOverlay) {
            closeModal();
          }
        });

        function openModal(title, data, editable = false) {
          modalTitle.textContent = title;
          modalContent.innerHTML = `
          <div class='bg-blue-50 rounded-lg p-4 border border-blue-200'>
          <table class='w-full border-collapse text-sm'>
            <tbody>
              ${Object.entries(data)
              .map(([key, val]) => {
                  if (key === 'Password') {
                    return `
                      <tr class='border-b border-blue-100'>
                        <td class='p-3 bg-blue-400 text-white font-semibold w-36 rounded-l'>Password</td>
                        <td class='p-3 bg-white'>
                          <button onclick="resetPassword('${data['ì•„ì´ë””']}')" class='text-red-600 font-semibold hover:underline'>ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”</button>
                          <p class='text-xs text-gray-500 mt-1'>â€» ì´ˆê¸°í™”ì‹œ ì•„ì´ë””ì™€ ë™ì¼í•˜ê²Œ ì ìš©ë˜ë©°, ë¶„ì‹¤ì‹œì—ë§Œ ì‚¬ìš© í•´ì£¼ì„¸ìš”!</p>
                        </td>
                      </tr>
                    `;
                  }
                  return `
                    <tr class='border-b border-blue-100'>
                      <td class='p-3 bg-blue-400 text-white font-semibold w-36 rounded-l'>${key}</td>
                      <td class='p-3 bg-white ${editable ? "editable" : ""}' contenteditable="false">${val}</td>
                    </tr>
                  `;
                }
              )
              .join("")}
            </tbody>
          </table>
          </div>
          ${editable
              ? `<div class='flex justify-end mt-4'>
                  <button id='editBtn' class='bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition'>ìˆ˜ì •í•˜ê¸°</button>
                </div>`
              : ""
            }
        `;
          modalOverlay.classList.remove("hidden");
          if (editable) {
            const editBtn = document.getElementById("editBtn");
            editBtn.addEventListener("click", () => {
              document.querySelectorAll(".editable").forEach((td) => {
                td.contentEditable = "true";
                td.classList.add("bg-yellow-50", "border-2", "border-yellow-400");
              });
              saveBtn.classList.remove("hidden");
              editBtn.classList.add("hidden");
            });
          }
        }

        function resetPassword(userId) {
          if (confirm('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            // ì‹¤ì œ ë¡œì§ì—ì„œëŠ” ì—¬ê¸°ì„œ ì„œë²„ì— ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
            alert(`ë¹„ë°€ë²ˆí˜¸ê°€ ì•„ì´ë””('${userId}')ì™€ ë™ì¼í•˜ê²Œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.`);
          }
        }

        document.getElementById("menuUserInfo").addEventListener("click", () => {
          openModal("íšŒì› ì •ë³´", memberData, true);
        });

        document.getElementById("menuDeliveryInfo").addEventListener("click", () => {
          openModal("ë°°ì†¡ì§€ ì •ë³´", deliveryData, true);
        });

        document.getElementById("menuAdminSite").addEventListener("click", () => {
          alert("ê´€ë¦¬ì ì‚¬ì´íŠ¸ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
        });

        document.getElementById("menuUserSite").addEventListener("click", () => {
          alert("í•™ìŠµì ì‚¬ì´íŠ¸ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
        });

        saveBtn.onclick = () => {
          alert("âœ… ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
          closeModal();
        };

        // âœ… ì´ë©”ì¼ ì „ì†¡ ëª¨ë‹¬ ë¡œì§
        const emailModal = document.getElementById("emailModal");
        const menuSendEmail = document.getElementById("menuSendEmail");
        const closeEmailModalBtn = document.getElementById("closeEmailModalBtn");

        function openEmailModal() {
          emailModal.classList.remove("hidden");
        }
        function closeEmailModal() {
          emailModal.classList.add("hidden");
        }

        menuSendEmail.addEventListener("click", openEmailModal);
        closeEmailModalBtn.addEventListener("click", closeEmailModal);
        emailModal.addEventListener("click", (e) => {
          if (e.target === emailModal) closeEmailModal();
        });

        document.getElementById("sendWebmail").addEventListener("click", () => {
          alert("ì›¹ë©”ì¼(Biz)ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
          closeEmailModal();
        });
        document.getElementById("sendPassmail").addEventListener("click", () => {
          alert("íŒ¨ìŠ¤ë©”ì¼(fnBiz)ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
          closeEmailModal();
        });

        // 4ï¸âƒ£ --- ë¬¸ì ë°œì†¡ ëª¨ë‹¬ ë¡œì§ ---
        const smsModal = document.getElementById("smsModal");
        const menuSendSms = document.getElementById("menuSendSms");
        const closeSmsModalBtn = document.getElementById("closeSmsModalBtn");
        const sendSmsBtn = document.getElementById("sendSmsBtn");
        const smsTemplateBody = document.getElementById("smsTemplateBody");
        const templateSearch = document.getElementById("templateSearch");
        const smsContent = document.getElementById("smsContent");
        const templatePagination = document.getElementById("templatePagination");

        let currentTemplates = [...smsTemplates];
        const templatesPerPage = 10;
        let currentPage = 1;

        // í…œí”Œë¦¿ ë Œë”ë§ ë° í˜ì´ì§€ë„¤ì´ì…˜
        function renderSmsTemplates() {
            smsTemplateBody.innerHTML = "";
            
            const start = (currentPage - 1) * templatesPerPage;
            const end = start + templatesPerPage;
            const paginatedTemplates = currentTemplates.slice(start, end);

            paginatedTemplates.forEach(template => {
                const tr = document.createElement("tr");
                tr.className = "border-t hover:bg-blue-50 cursor-pointer";
                tr.innerHTML = `<td class="p-2 text-center">${template.id}</td><td class="p-2">${template.title}</td>`;
                tr.addEventListener('click', () => {
                    smsContent.value = template.content;
                    // ì„ íƒëœ í–‰ í•˜ì´ë¼ì´íŠ¸
                    Array.from(smsTemplateBody.querySelectorAll('tr')).forEach(row => row.classList.remove('bg-blue-100', 'font-semibold'));
                    tr.classList.add('bg-blue-100', 'font-semibold');
                });
                smsTemplateBody.appendChild(tr);
            });

            renderPagination();
        }

        // í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ ë Œë”ë§
        function renderPagination() {
            templatePagination.innerHTML = "";
            const pageCount = Math.ceil(currentTemplates.length / templatesPerPage);

            for (let i = 1; i <= pageCount; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.textContent = i;
                pageBtn.className = `px-3 py-1 rounded ${currentPage === i ? 'bg-blue-600 text-white' : 'bg-gray-200 hover:bg-gray-300'}`;
                pageBtn.onclick = () => {
                    currentPage = i;
                    renderSmsTemplates();
                };
                templatePagination.appendChild(pageBtn);
            }
        }

        // í…œí”Œë¦¿ ê²€ìƒ‰
        templateSearch.addEventListener('input', () => {
            const searchTerm = templateSearch.value.toLowerCase();
            currentTemplates = smsTemplates.filter(t => t.title.toLowerCase().includes(searchTerm));
            currentPage = 1;
            renderSmsTemplates();
        });

        // ëª¨ë‹¬ ì—´ê¸°
        menuSendSms.addEventListener("click", () => {
            const customerPhone = document.getElementById("customer-phone").textContent;
            document.getElementById("smsReceiver").value = customerPhone;
            
            // ëª¨ë‹¬ ì—´ ë•Œ ì´ˆê¸°í™”
            templateSearch.value = "";
            currentTemplates = [...smsTemplates];
            currentPage = 1;
            smsContent.value = "";
            renderSmsTemplates();

            smsModal.classList.remove("hidden");
        });

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeSmsModal() {
            smsModal.classList.add("hidden");
        }
        closeSmsModalBtn.addEventListener("click", closeSmsModal);
        smsModal.addEventListener('click', (e) => {
            if (e.target === smsModal) {
                closeSmsModal();
            }
        });

        // ë°œì†¡ ë²„íŠ¼
        sendSmsBtn.addEventListener("click", () => {
            const receiver = document.getElementById("smsReceiver").value;
            const content = document.getElementById("smsContent").value;
            if (!content) {
                alert("ë¬¸ì ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
            alert(`'${receiver}' ë²ˆí˜¸ë¡œ ë¬¸ìê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në‚´ìš©: ${content}`);
            closeSmsModal();
        });

        // 3ï¸âƒ£ --- í…Œì´ë¸” ë Œë”ë§ (ìƒë‹´ì´ë ¥, í•™ìŠµê´€ë¦¬, ë°°ì†¡ê´€ë¦¬) --- (ë³µêµ¬ ë° í†µí•©)
        const historyBody = document.getElementById("history-body");
        const historyMore = document.getElementById("history-more");
        let shownCount = 5;

        function renderHistory(limit) {
          historyBody.innerHTML = "";
          if (historyData.length === 0) {
            historyBody.innerHTML = `<tr><td colspan="5" class="text-center p-4 text-gray-500">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
            return;
          }
          historyData
            .slice(0, limit)
            .forEach((h) => {
              const tr = document.createElement("tr");
              tr.className = "border-b hover:bg-blue-50 cursor-pointer";
              tr.innerHTML = `
                <td class="p-3">${h.datetime}</td>
                <td class="p-3">${h.channel}</td>
                <td class="p-3">${h.title}</td>
                <td class="p-3 font-semibold ${h.status === "ì²˜ë¦¬ì™„ë£Œ" ? "text-green-600" : "text-red-600"}">${h.status}</td>
                <td class="p-3">${h.manager}</td>`;
              historyBody.appendChild(tr);
            });
        }

        // ì´ˆê¸° ë Œë”ë§
        renderHistory(shownCount);

        // ë”ë³´ê¸° ë²„íŠ¼ í‘œì‹œ ë° ì´ë²¤íŠ¸
        if (historyData.length > 5) {
          historyMore.classList.remove("hidden");
        }
        historyMore.addEventListener("click", () => {
          shownCount += 5;
          renderHistory(shownCount);
          if (shownCount >= historyData.length) {
            historyMore.classList.add("hidden");
          }
        });

        // âœ… ìƒë‹´ í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´ í‘œì‹œ (ì„ íƒí–‰ í•˜ì´ë¼ì´íŠ¸ í¬í•¨)
        const historyDetail = document.getElementById("history-detail");

        historyBody.addEventListener("click", (e) => {
          const row = e.target.closest("tr");
          if (!row || row.querySelector('td[colspan="5"]')) return; // ë°ì´í„° ì—†ëŠ” í–‰ í´ë¦­ ë°©ì§€

          Array.from(historyBody.querySelectorAll("tr")).forEach((r) =>
            r.classList.remove("bg-blue-100")
          );
          row.classList.add("bg-blue-100");

          const index = Array.from(historyBody.children).indexOf(row);
          const h = historyData.slice(0, shownCount)[index]; // í˜„ì¬ ë³´ì—¬ì§€ëŠ” ë°ì´í„°ì…‹ì—ì„œ ì¸ë±ìŠ¤ ì°¾ê¸°
          if (!h) return;

          historyDetail.classList.remove("hidden");
          historyDetail.innerHTML = `
            <h4 class="font-semibold text-blue-700 text-md mb-3">${h.title}</h4>
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
              <table class="w-full border-separate border-spacing-y-2 text-sm">
                <tbody>
                  <tr>
                    <td class="p-2 bg-gray-50 w-32 font-semibold rounded-l-lg">ìƒë‹´ì±„ë„</td>
                    <td class="p-2 rounded-r-lg border border-gray-100">${h.channel}</td>
                  </tr>
                  <tr>
                    <td class="p-2 bg-gray-50 font-semibold rounded-l-lg">ëŒ€ë¶„ë¥˜</td>
                    <td class="p-2 rounded-r-lg border border-gray-100">${h.categoryMain}</td>
                  </tr>
                  <tr>
                    <td class="p-2 bg-gray-50 font-semibold rounded-l-lg">ì¤‘ë¶„ë¥˜</td>
                    <td class="p-2 rounded-r-lg border border-gray-100">${h.categorySub}</td>
                  </tr>
                  <tr>
                    <td class="p-2 bg-gray-50 font-semibold rounded-l-lg">ìƒë‹´ì¼ì‹œ</td>
                    <td class="p-2 rounded-r-lg border border-gray-100">${h.datetime}</td>
                  </tr>
                  <tr>
                    <td class="p-2 bg-gray-50 font-semibold rounded-l-lg">ë‹´ë‹¹ì</td>
                    <td class="p-2 rounded-r-lg border border-gray-100">${h.manager}</td>
                  </tr>
                  <tr>
                    <td class="p-2 bg-gray-50 font-semibold rounded-l-lg">ì§„í–‰ìƒíƒœ</td>
                    <td class="p-2 rounded-r-lg border border-gray-100">${h.status}</td>
                  </tr>
                  <tr>
                    <td class="p-2 bg-gray-50 font-semibold rounded-l-lg">ë‹µë³€ë‚´ìš©</td>
                    <td class="p-2 rounded-r-lg border border-gray-100 whitespace-pre-wrap text-gray-700">${h.detail?.reply || "ë‚´ìš© ì—†ìŒ"}</td>
                  </tr>
                </tbody>
              </table>
            </div>`;
        }); 

        // âœ… í•™ìŠµê´€ë¦¬ ë Œë”ë§
        const studyBody = document.getElementById("study-body");
        const studyMore = document.getElementById("study-more");
        let studyShown = 5;

        function renderStudy(limit) {
          studyBody.innerHTML = "";
          if (studyData.length === 0) {
            document.getElementById("study-empty").classList.remove("hidden");
            return;
          }
          studyData
            .slice(0, limit)
            .forEach((s) => {
              const tr = document.createElement("tr");
              tr.className = "border-b hover:bg-blue-50 cursor-pointer";
              tr.innerHTML = `
                <td class="p-3">${s.round}</td>
                <td class="p-3">${s.code}</td>
                <td class="p-3">${s.subject}</td>
                <td class="p-3">${s.period}</td>
                <td class="p-3">${s.reviewPeriod}</td>
                <td class="p-3">${s.attend}</td>
                <td class="p-3">${s.test}</td>
                <td class="p-3">${s.mock}</td>
                <td class="p-3">${s.reset}</td>
                <td class="p-3">${s.level}</td>
                <td class="p-3">${s.grade}</td>
                <td class="p-3">${s.complete}</td>
                <td class="p-3">${s.baseScore}</td>
                <td class="p-3">${s.provider}</td>
                <td class="p-3">${s.regDate}</td>`;
              studyBody.appendChild(tr);
            });
        }

        renderStudy(studyShown);

        if (studyData.length > 5) {
          studyMore.classList.remove("hidden");
        }
        studyMore.addEventListener("click", () => {
          studyShown += 5;
          renderStudy(studyShown);
          if (studyShown >= studyData.length) {
            studyMore.classList.add("hidden");
          }
        });

        // âœ… í•™ìŠµê´€ë¦¬ í–‰ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
        const studyActionModal = document.getElementById("studyActionModal");
        const closeStudyModalBtn = document.getElementById("closeStudyModalBtn");

        studyBody.addEventListener("click", (e) => {
          if (e.target.closest("tr")) {
            studyActionModal.classList.remove("hidden");
          }
        });

        function closeStudyModal() {
          studyActionModal.classList.add("hidden");
        }

        closeStudyModalBtn.addEventListener("click", closeStudyModal);
        studyActionModal.addEventListener("click", (e) => { if (e.target === studyActionModal) closeStudyModal(); });

        // âœ… ë°°ì†¡ê´€ë¦¬ ë Œë”ë§
        const deliveryBody2 = document.getElementById("delivery-body");
        const deliveryMore = document.getElementById("delivery-more");
        const deliveryEmpty = document.getElementById("delivery-empty");
        let deliveryShown = 5;

        function renderDelivery(limit) {
          deliveryBody2.innerHTML = "";
          newDeliveryData.slice(0, limit).forEach((d) => {
            const tr = document.createElement("tr");
            tr.className = "border-b hover:bg-blue-50";
            tr.innerHTML = `
              <td class="p-3 whitespace-nowrap">${d.orderDate}</td>
              <td class="p-3 whitespace-nowrap">${d.orderNo}</td>
              <td class="p-3 whitespace-nowrap">${d.book}</td>
              <td class="p-3 whitespace-nowrap">${d.amount}</td>
              <td class="p-3 whitespace-nowrap">${d.storeOrder}</td>
              <td class="p-3 whitespace-nowrap">${d.courier}</td>
              <td class="p-3 whitespace-nowrap">${d.tracking}</td>
              <td class="p-3 whitespace-nowrap">${d.status}</td>
              <td class="p-3 whitespace-nowrap">${d.payDate}</td>
              <td class="p-3 whitespace-nowrap">${d.deliveryMethod}</td>`;
            deliveryBody2.appendChild(tr);
          });
        }

        if (newDeliveryData.length === 0) {
          deliveryEmpty.classList.remove("hidden");
        } else {
          renderDelivery(deliveryShown);
          if (newDeliveryData.length > 5) {
            deliveryMore.classList.remove("hidden");
          }
          deliveryMore.addEventListener("click", () => {
            deliveryShown += 5;
            renderDelivery(deliveryShown);
            if (deliveryShown >= newDeliveryData.length) {
              deliveryMore.classList.add("hidden");
            }
          });
        }
      </script>
</body>

</html>