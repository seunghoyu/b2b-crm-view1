<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>B2B CRM ê³ ê° ê²€ìƒ‰ ë° ë“±ë¡</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <style>
    body { font-family: 'Pretendard', sans-serif; }
  </style>
</head>

<body class="bg-gray-50 h-screen flex overflow-hidden">
  <!-- âœ… ì¢Œì¸¡ ì‚¬ì´ë“œ ë©”ë‰´ (ëŒ€ì‹œë³´ë“œì™€ ë™ì¼) -->
  <aside class="w-[230px] bg-white border-r border-gray-200 text-gray-700 flex-shrink-0">
    <a href="b2b_dashboard_tailwind.html" class="block p-5 text-lg font-bold text-gray-800 border-b border-gray-200 hover:bg-gray-50 transition">
      B2B CRM ë©”ë‰´
    </a>

    <nav class="p-3 space-y-2">
      <!-- ê´€ë¦¬ë©”ë‰´ -->
      <div>
        <button id="menuToggle2" class="group w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-gray-100 transition">
          <span>ê´€ë¦¬ë©”ë‰´</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-gray-500 transition-transform group-open:-rotate-180">
            <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
        </button>
        <div id="menu2" class="ml-4 mt-2 space-y-1 text-sm">
          <a href="b2b_dashboard_tailwind.html" class="block px-3 py-1 hover:bg-gray-100 rounded">ìƒë‹´ í˜„í™©</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ê¸°ì—… ëª©ë¡</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ê³ ê° ëª©ë¡</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ìˆ˜ê°•ì‹œê°„ ì¡°íšŒ</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">í•™ìŠµìƒë‹´Â·CS ê´€ë¦¬</a>
          <a href="manual_list.html" class="block px-3 py-1 hover:bg-gray-100 rounded">ë©”ë‰´ì–¼ ê´€ë¦¬</a>
          <a href="customer_search_registration.html" class="block px-3 py-1 bg-gray-100 text-gray-800 rounded font-semibold">ê³ ê° ê²€ìƒ‰/ë“±ë¡</a>
        </div>
      </div>
      <!-- ë¬¸ìê´€ë¦¬ -->
      <div>
        <button id="menuToggle1" class="group w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-gray-100 transition">
          <span>ë¬¸ìê´€ë¦¬</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-gray-500 transition-transform group-open:-rotate-180">
            <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
        </button>
        <div id="menu1" class="hidden ml-4 mt-2 space-y-1 text-sm">
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë¬¸ìë°œì†¡</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë¬¸ìì„¤ì •</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë°œì†¡ì´ë ¥ ì¡°íšŒ</a>
        </div>
      </div>

      <!-- ì´ë©”ì¼ ê´€ë¦¬ -->
      <div>
        <button id="menuToggleEmail" class="group w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-gray-100 transition">
          <span>ì´ë©”ì¼ ê´€ë¦¬</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-gray-500 transition-transform group-open:-rotate-180">
            <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
        </button>
        <div id="menuEmail" class="hidden ml-4 mt-2 space-y-1 text-sm">
          <a href="#" class="block px-3 py-1 hover:bg-gray-100 rounded">ì›¹ë©”ì¼(Biz)</a>
          <a href="#" class="block px-3 py-1 hover:bg-gray-100 rounded">íŒ¨ìŠ¤ë©”ì¼(fnBiz)</a>
        </div>
      </div>

      <!-- ë¹„ì¦ˆí†¡ ê´€ë¦¬ -->
      <div>
        <button id="menuToggleBiztalk" class="group w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-gray-100 transition">
          <span>ë¹„ì¦ˆí†¡ ê´€ë¦¬</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-gray-500 transition-transform group-open:-rotate-180">
            <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
        </button>
        <div id="menuBiztalk" class="hidden ml-4 mt-2 space-y-1 text-sm">
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë¹„ì¦ˆí†¡ë°œì†¡(ê°•ì˜)</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë¹„ì¦ˆí†¡ë°œì†¡(íšŒì›)</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë°œì†¡ì´ë ¥ ì¡°íšŒ(ê°•ì˜)</a>
          <a href="#" onclick="alert('ì±”í”„B2Bìš´ì˜ì(ìµœê³ ìš´ì˜ì)ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" class="block px-3 py-1 hover:bg-gray-100 rounded">ë°œì†¡ì´ë ¥ ì¡°íšŒ(íšŒì›)</a>
        </div>
      </div>
    </nav>
  </aside>

  <!-- âœ… ë©”ì¸ ì˜ì—­ -->
  <div class="flex-1 flex flex-col relative overflow-y-auto">
     <!-- âœ… ë©”ì¸: ë¹„íšŒì› ìƒë‹´ ë‚´ìš© ì…ë ¥ -->
    <main class="flex-1 p-8 flex flex-col">
      <section class="bg-white p-8 rounded-xl shadow flex-1 flex flex-col">
        <h2 class="text-xl font-semibold text-gray-800 border-b pb-4 mb-6">ë¹„íšŒì› ìƒë‹´ ë‚´ìš© ì…ë ¥</h2>
        <div class="flex flex-col flex-1">
          <!-- ìƒë‹¨ ì…ë ¥ í•„ë“œ -->
          <div class="space-y-4 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-x-8 gap-y-4">
              <div>
                  <label for="nonMemberPhone" class="text-sm font-medium text-gray-700">ë¬¸ì˜ì ì „í™”ë²ˆí˜¸ (í•„ìˆ˜)</label>
                  <input type="text" id="nonMemberPhone" placeholder="'-' ì—†ì´ ìˆ«ìë§Œ ì…ë ¥" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none" />
              </div>
              <div>
                  <label for="nonMemberName" class="text-sm font-medium text-gray-700">ë¬¸ì˜ìëª…</label>
                  <input type="text" id="nonMemberName" placeholder="ë¬¸ì˜ì ì´ë¦„" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none" />
              </div>
              <div>
                <label for="nonMemberManager" class="text-sm font-medium text-gray-700">ë‹´ë‹¹ì</label>
                <select id="nonMemberManager" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-gray-500 focus:border-gray-500">
                  <option>ë‹´ë‹¹ì ì„ íƒ</option>
                  <option>í™ê¸¸ë™</option>
                  <option>ì´í˜„ìš°</option>
                  <option>ë°•ì§€í˜„</option>
                </select>
              </div>
              <div>
                <label for="statusSelect" class="text-sm font-medium text-gray-700">ì²˜ë¦¬ìƒíƒœ</label>
                <select id="statusSelect" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-gray-500 focus:border-gray-500"> 
                  <option>ì²˜ë¦¬ìƒíƒœ ì„ íƒ</option>
                  <option value="ì²˜ë¦¬ëŒ€ê¸°" class="text-red-600 font-semibold">ì²˜ë¦¬ëŒ€ê¸°</option>
                  <option value="ì²˜ë¦¬ì™„ë£Œ" class="text-green-600 font-semibold">ì²˜ë¦¬ì™„ë£Œ</option>
                </select>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-4">
              <div>
                <label for="nonMemberCompany" class="text-sm font-medium text-gray-700">ê¸°ì—…ëª… (ì„ íƒ)</label>
                <input type="text" id="nonMemberCompany" placeholder="ì†Œì† ê¸°ì—…ëª…" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none" />
              </div>
              <div>
                <label for="categorySelect" class="text-sm font-medium text-gray-700">ë¶„ë¥˜</label>
                <select id="categorySelect" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-gray-500 focus:border-gray-500">
                  <option value="">ë¶„ë¥˜ ì„ íƒ</option>
                  <option value="ê²¬ì /ì œíœ´ë¬¸ì˜" class="font-bold text-blue-600">ê²¬ì /ì œíœ´ë¬¸ì˜</option>
                  <option>ì˜¤ë°œì‹ </option>
                  <option>ê¸°íƒ€</option>
                </select>
              </div>
              <div>
                <label for="memberTypeSelect" class="text-sm font-medium text-gray-700">íšŒì›êµ¬ë¶„</label>
                <select id="memberTypeSelect" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-gray-500 focus:border-gray-500">
                  <option>íšŒì›êµ¬ë¶„ ì„ íƒ</option>
                  <option>í•™ìŠµì</option>
                  <option>ê¸°ì—…ê´€ë¦¬ì</option>
                  <option>êµìœ¡ë‹´ë‹¹ì</option>
                </select>
              </div>
            </div>
            <div class="grid grid-cols-1 mt-4">
              <div>
                <label for="nonMemberTitle" class="text-sm font-medium text-gray-700">ì œëª© (í•„ìˆ˜)</label>
                <input type="text" id="nonMemberTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-gray-500 focus:border-gray-500" />
              </div>
            </div>
          </div>
          <div class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-x-8">
            <div class="flex flex-col">
              <!-- í•˜ë‹¨ í…ìŠ¤íŠ¸ ì˜ì—­ (í™”ë©´ ì±„ìš°ê¸°) -->
              <label for="inquiryContent" class="text-sm font-medium text-gray-700">ë¬¸ì˜ ë‚´ìš©</label>
              <textarea id="inquiryContent" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 flex-1 focus:ring-gray-500 focus:border-gray-500 focus:outline-none"></textarea>
            </div>
            <div class="flex flex-col">
                <label for="responseContent" class="text-sm font-medium text-gray-700">ì‘ëŒ€ ë‚´ìš©</label>
                <textarea id="responseContent" placeholder="ì‘ëŒ€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 flex-1 focus:ring-gray-500 focus:border-gray-500 focus:outline-none"></textarea>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ -->
    <footer class="bg-white px-5 py-4 shadow-inner flex justify-end items-center border-t sticky bottom-0">
      <button onclick="window.location.href='b2b_dashboard_tailwind.html'" class="bg-gray-200 text-gray-800 px-6 py-2 rounded-lg hover:bg-gray-300 transition font-semibold mr-3">
        ì·¨ì†Œ
      </button>
      <button id="register-btn" class="bg-gray-800 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition font-semibold shadow-sm">
        ìƒë‹´ ë‚´ìš© ì €ì¥
      </button>
    </footer>
  </div>

  <!-- âœ… í†µí•© ê³ ê° ê²€ìƒ‰ ëª¨ë‹¬ -->
  <div id="customer-search-modal" class="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-start z-50">
    <div class="bg-white rounded-xl shadow-2xl w-full max-w-7xl max-h-[80vh] flex flex-col mt-16">
      <header class="p-5 border-b border-gray-200">
        <h3 class="text-2xl font-bold text-gray-800">í†µí•© ê³ ê° ê²€ìƒ‰</h3>
        <p class="text-sm text-gray-500 mt-1">ë¨¼ì € ê³ ê° ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”. ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¹„íšŒì› ìƒë‹´ìœ¼ë¡œ ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      </header>

      <!-- Main content area for side-by-side layout -->
      <div class="flex-1 flex flex-row overflow-hidden">
        <!-- ì¢Œì¸¡: ê²€ìƒ‰ í•„í„° (flex-col ì¶”ê°€) -->
        <div class="w-1/3 p-6 bg-gray-50">
          <div class="space-y-4">
            <div class="relative">
              <label for="modal-company-name" class="text-sm font-medium text-gray-700">ê¸°ì—…ëª… (ê¸°ì—…ì½”ë“œ)</label>
              <input type="text" id="modal-company-name" placeholder="ê¸°ì—…ëª… ë˜ëŠ” ê¸°ì—…ì½”ë“œ" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none" autocomplete="off">
              <div id="modal-company-suggestions" class="hidden absolute z-20 mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 max-h-48 overflow-y-auto"></div>
            </div>
            <div>
              <label for="modal-customer-name" class="text-sm font-medium text-gray-700">ì´ë¦„</label>
              <input type="text" id="modal-customer-name" placeholder="ê³ ê° ì´ë¦„" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none">
            </div>
            <div>
              <label for="modal-customer-id" class="text-sm font-medium text-gray-700">ì•„ì´ë””</label>
              <input type="text" id="modal-customer-id" placeholder="ê³ ê° ì•„ì´ë””" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none">
            </div>
            <div>
              <label for="modal-customer-mobile" class="text-sm font-medium text-gray-700">íœ´ëŒ€í° ë²ˆí˜¸</label>
              <input type="text" id="modal-customer-mobile" placeholder="'-' ì—†ì´ ìˆ«ìë§Œ ì…ë ¥" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none">
            </div>
            <div>
              <label for="modal-customer-office" class="text-sm font-medium text-gray-700">ì¼ë°˜ ì „í™”ë²ˆí˜¸</label>
              <input type="text" id="modal-customer-office" placeholder="'-' ì—†ì´ ìˆ«ìë§Œ ì…ë ¥" class="w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-gray-500 focus:border-gray-500 focus:outline-none">
            </div>
          </div>
        </div>

        <!-- ìš°ì¸¡: ê²€ìƒ‰ ê²°ê³¼ -->
        <div id="modal-search-results" class="w-2/3 p-6 overflow-y-auto">
          <p class="text-center text-gray-500">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ í›„ ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
          <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œ -->
          <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆì„ ë•Œ (í…Œì´ë¸”) -->
          <!-- JSë¡œ ë™ì  ìƒì„± -->
        </div>
      </div>

      <footer class="p-4 bg-gray-50 border-t flex justify-between items-center space-x-2">
        <button onclick="goToNonMemberRegistration()" class="bg-gray-500 text-white px-5 py-2 rounded-lg hover:bg-gray-600 transition font-semibold shadow-sm">
          ë¹„íšŒì›ìœ¼ë¡œ ìƒë‹´ ê¸°ë¡
        </button>
        <div class="flex items-center space-x-2">
          <button id="modal-search-button" class="bg-gray-800 text-white px-8 py-2 rounded-lg hover:bg-gray-700 transition font-semibold shadow-sm">ê²€ìƒ‰</button>
          <button onclick="closeSearchModal()" class="bg-gray-200 text-gray-800 px-5 py-2 rounded-lg hover:bg-gray-300 transition font-semibold">
            ë‹«ê¸°
          </button>
        </div>
      </footer>
    </div>
  </div>

  <script>
    // âœ… ì‚¬ì´ë“œë©”ë‰´ í† ê¸€ (ëŒ€ì‹œë³´ë“œì™€ ë™ì¼)
    const menuToggle1 = document.getElementById("menuToggle1");
    const menu1 = document.getElementById("menu1");
    const menuToggle2 = document.getElementById("menuToggle2");
    const menu2 = document.getElementById("menu2");
    const menuToggleEmail = document.getElementById("menuToggleEmail");
    const menuEmail = document.getElementById("menuEmail");
    const menuToggleBiztalk = document.getElementById("menuToggleBiztalk");
    const menuBiztalk = document.getElementById("menuBiztalk");

    [menuToggle1, menuToggle2, menuToggleEmail, menuToggleBiztalk].forEach(toggle => {
      toggle.addEventListener("click", () => {
        const menu = toggle.nextElementSibling;
        menu.classList.toggle("hidden");
        toggle.classList.toggle("group-open");
      });
    });

    menu2.classList.remove("hidden"); // ê´€ë¦¬ë©”ë‰´ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì—´ì–´ë‘ 
    menuToggle2.classList.add("group-open");

    // âœ… ë“±ë¡í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    document.getElementById("register-btn").addEventListener("click", () => {
        alert("ë¹„íšŒì› ìƒë‹´ ë‚´ìš©ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒë‹´ í˜„í™©ì— ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.");
        window.location.href = 'b2b_dashboard_tailwind.html';
    });

    // ğŸ”¹ ëŒ€ë¶„ë¥˜-ì¤‘ë¶„ë¥˜ ì—°ë™ ê¸°ëŠ¥ ì‚­ì œ (í†µí•©ë¨)

    // âœ… ì²˜ë¦¬ìƒíƒœ ë“œë¡­ë‹¤ìš´ ìƒ‰ìƒ ë³€ê²½ (customer_view.html ì—ì„œ ë³µì‚¬)
    const statusSelect = document.getElementById("statusSelect");
    statusSelect.addEventListener("change", function() {
      // ë¨¼ì € ëª¨ë“  ìƒ‰ìƒ ë° êµµê¸° í´ë˜ìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
      this.classList.remove("text-red-600", "text-green-600", "font-semibold");

      const selectedValue = this.value;

      if (selectedValue === "ì²˜ë¦¬ëŒ€ê¸°") {
        this.classList.add("text-red-600", "font-semibold");
      } else if (selectedValue === "ì²˜ë¦¬ì™„ë£Œ") {
        this.classList.add("text-green-600", "font-semibold");
      }
    });

    // âœ… ë¶„ë¥˜ ë“œë¡­ë‹¤ìš´ ìƒ‰ìƒ ë³€ê²½
    const categorySelect = document.getElementById("categorySelect");
    categorySelect.addEventListener("change", function() {
      // ë¨¼ì € ëª¨ë“  ìƒ‰ìƒ ë° êµµê¸° í´ë˜ìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
      this.classList.remove("text-blue-600", "font-bold");

      const selectedOption = this.options[this.selectedIndex];

      // ì„ íƒëœ ì˜µì…˜ì˜ í´ë˜ìŠ¤ë¥¼ select ìš”ì†Œì— ì ìš©í•©ë‹ˆë‹¤.
      if (selectedOption.value === "ê²¬ì /ì œíœ´ë¬¸ì˜") {
        this.classList.add("text-blue-600", "font-bold");
      }
    });

    // ===================================================================================
    // âœ… ë°ì´í„° ì •ì˜
    // ===================================================================================

    // âœ… ê¸°ì—… ì •ë³´ ë”ë¯¸ ë°ì´í„°
    const companyDB = [
        { name: "ì‚¼ì„±ì „ì", code: "samsung", salesManager: "ë°•ì§€í˜„", opManager: "ê¹€ë¯¼ì¤€" },
        { name: "SKí•˜ì´ë‹‰ìŠ¤", code: "skhynix", salesManager: "ì´í˜„ìš°", opManager: "ì´ì„œì—°" },
        { name: "LGí™”í•™", code: "lgchem", salesManager: "ê¹€ì˜í¬", opManager: "ë°•ë„ìœ¤" },
        { name: "í˜„ëŒ€ìë™ì°¨", code: "hyundai", salesManager: "ì´í•˜ìœ¤", opManager: "ìµœì„œìœ¤" },
        { name: "ì¹´ì¹´ì˜¤", code: "kakao", salesManager: "ë°•ì§€í˜„", opManager: "ì •ì‹œìš°" },
        { name: "ë„¤ì´ë²„", code: "naver", salesManager: "ì´í˜„ìš°", opManager: "ê°•ì§€ìš°" },
        { name: "CJí‘¸ë“œë¹Œ", code: "cjfood", salesManager: "ê¹€ì˜í¬", opManager: "ì¡°í•˜ì¤€" },
        { name: "ëŒ€í•œí•­ê³µ", code: "koreanair", salesManager: "ì´í•˜ìœ¤", opManager: "ìœ¤ì§€ìœ " },
        { name: "ë‹¤ìš°ì˜¤í”¼ìŠ¤", code: "daou", salesManager: "ë°•ì§€í˜„", opManager: "ì¥ì£¼ì›" },
        { name: "í¬ìŠ¤ì½”", code: "posco", salesManager: "ì´í˜„ìš°", opManager: "ì„ì„œí˜„" }
    ];

    // âœ… ê³ ê° ì •ë³´ ë”ë¯¸ ë°ì´í„°
    const dummyCustomers = [];
    companyDB.forEach((company, companyIndex) => {
      const firstNames = ["ê¹€", "ì´", "ë°•", "ìµœ", "ì •", "ê°•", "ì¡°", "ìœ¤", "ì¥", "ì„"];
      const lastNames = ["ë¯¼ì¤€", "ì„œì—°", "ë„ìœ¤", "ì„œìœ¤", "ì‹œìš°", "ì§€ìš°", "í•˜ì¤€", "ì§€ìœ ", "ì£¼ì›", "ì„œí˜„"];
      const memberTypes = ["í•™ìŠµì", "ê¸°ì—…ê´€ë¦¬ì", "êµìœ¡ë‹´ë‹¹ì", "ê¸°ì—…ìš´ì˜ì"];
      const customerCount = company.name === "ì‚¼ì„±ì „ì" ? 5 : 3; // ì‚¼ì„±ì „ìì— ë” ë§ì€ ë°ì´í„° ìƒì„±

      for (let i = 0; i < customerCount; i++) {
        const name = firstNames[(companyIndex + i) % firstNames.length] + lastNames[(companyIndex + i) % lastNames.length];
        const id = `${company.code}_user${i + 1}`;
        dummyCustomers.push({ companyCode: company.code, companyName: company.name, id: id, name: name, memberType: memberTypes[i % memberTypes.length], email: `${id}@${company.code}.com`, mobilePhone: `010-1234-${String(1000 + companyIndex * 10 + i).padStart(4, '0')}`, officePhone: `02-5678-${String(1000 + companyIndex * 10 + i).padStart(4, '0')}`, regDate: `2025-10-${String(20 - (companyIndex + i)).padStart(2, '0')}` });
      }
    });

    // âœ… í†µí•© ê²€ìƒ‰ ëª¨ë‹¬ ë¡œì§
    const searchModal = document.getElementById('customer-search-modal');
    const modalSearchBtn = document.getElementById('modal-search-button');
    const modalGoToRegisterBtn = document.getElementById('modal-go-to-register');
    const modalSearchResultsContainer = document.getElementById('modal-search-results');
    const modalCompanyNameInput = document.getElementById('modal-company-name');
    const modalCustomerNameInput = document.getElementById('modal-customer-name');
    const modalCustomerIdInput = document.getElementById('modal-customer-id');
    const modalCustomerMobileInput = document.getElementById('modal-customer-mobile');
    const modalCustomerOfficeInput = document.getElementById('modal-customer-office');

    // ëª¨ë‹¬ì„ ë‹«ëŠ” í•¨ìˆ˜
    function closeSearchModal() {
      searchModal.classList.add('hidden');
    }

    // ëª¨ë‹¬ì˜ 'ì‹ ê·œ ê³ ê°ìœ¼ë¡œ ë“±ë¡' ë²„íŠ¼ í´ë¦­ ì‹œ
    function goToNonMemberRegistration() {
      // ê²€ìƒ‰ì— ì‚¬ìš©í–ˆë˜ ê°’ì„ ë¹„íšŒì› ìƒë‹´ í¼ìœ¼ë¡œ ì „ë‹¬
      document.getElementById('nonMemberName').value = modalCustomerNameInput.value;
      document.getElementById('nonMemberPhone').value = modalCustomerMobileInput.value || modalCustomerOfficeInput.value;

      closeSearchModal(); // ëª¨ë‹¬ ë‹«ê¸°
    }

    // ëª¨ë‹¬ ê²€ìƒ‰ ì‹¤í–‰ í•¨ìˆ˜
    function executeModalSearch() {
      let companyQuery = modalCompanyNameInput.value.trim().toLowerCase();
      // "ê¸°ì—…ëª… (ê¸°ì—…ì½”ë“œ)" í˜•ì‹ì—ì„œ ê¸°ì—…ëª…ë§Œ ì¶”ì¶œ
      const companyMatch = companyQuery.match(/^(.*?)\s*\(/);
      const pureCompanyName = companyMatch ? companyMatch[1].trim() : companyQuery;
      const nameQuery = modalCustomerNameInput.value.trim().toLowerCase();
      const idQuery = modalCustomerIdInput.value.trim().toLowerCase();
      const mobileQuery = modalCustomerMobileInput.value.trim().replace(/-/g, '');
      const officeQuery = modalCustomerOfficeInput.value.trim().replace(/-/g, '');

      // ëª¨ë“  ì…ë ¥ í•„ë“œê°€ ë¹„ì–´ìˆìœ¼ë©´ ê²€ìƒ‰í•˜ì§€ ì•ŠìŒ
      if (!companyQuery && !nameQuery && !idQuery && !mobileQuery && !officeQuery) {
        modalSearchResultsContainer.innerHTML = `<p class="text-center text-gray-500">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ í›„ ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>`;
        return;
      }

      const searchResults = dummyCustomers.filter(customer => {
        const matchCompany = !pureCompanyName || customer.companyName.toLowerCase().includes(pureCompanyName) || customer.companyCode.toLowerCase().includes(pureCompanyName);
        const matchName = !nameQuery || customer.name.toLowerCase().includes(nameQuery);
        const matchId = !idQuery || customer.id.toLowerCase().includes(idQuery);
        const matchMobile = !mobileQuery || customer.mobilePhone.replace(/-/g, '').includes(mobileQuery);
        const matchOffice = !officeQuery || customer.officePhone.replace(/-/g, '').includes(officeQuery);
        return matchCompany && matchName && matchId && matchMobile && matchOffice;
      });

      if (searchResults.length > 0) {
        // ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆì„ ê²½ìš° í…Œì´ë¸”ë¡œ í‘œì‹œ
        let tableHTML = `
          <table class="w-full table-auto border-collapse text-sm text-gray-700">
            <thead>
              <tr class="bg-gray-100 border-b text-left text-gray-600">
                <th class="p-3">ê¸°ì—…ì½”ë“œ</th>
                <th class="p-3">íšŒì‚¬ëª…</th>
                <th class="p-3">ì•„ì´ë””</th>
                <th class="p-3">ì´ë¦„</th>
                <th class="p-3">íšŒì›êµ¬ë¶„</th>
                <th class="p-3">email</th>
                <th class="p-3">í•¸ë“œí°</th>
                <th class="p-3">ì „í™”ë²ˆí˜¸</th>
                <th class="p-3">íšŒì›ê°€ì…ì¼</th>
              </tr>
            </thead>
            <tbody>
        `;
        searchResults.forEach(customer => {
          tableHTML += `
            <tr class="border-b hover:bg-gray-50 transition cursor-pointer whitespace-nowrap" onclick="selectCustomerAndClose(this)">
              <td class="p-3">${customer.companyCode}</td>
              <td class="p-3 font-medium">${customer.companyName}</td>
              <td class="p-3">${customer.id}</td>
              <td class="p-3">${customer.name}</td>
              <td class="p-3">${customer.memberType}</td>
              <td class="p-3">${customer.email}</td>
              <td class="p-3">${maskPhoneNumber(customer.mobilePhone)}</td>
              <td class="p-3">${maskPhoneNumber(customer.officePhone)}</td>
              <td class="p-3">${customer.regDate}</td>
            </tr>
          `;
        });
        tableHTML += `</tbody></table>`;
        modalSearchResultsContainer.innerHTML = tableHTML;
      } else {
        // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ê²½ìš°
        modalSearchResultsContainer.innerHTML = `
          <div class="text-center py-10">
            <p class="text-gray-600 mb-6">ê²€ìƒ‰ëœ ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            <div class="flex justify-center space-x-4">
              <button onclick="goToNonMemberRegistration()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition font-semibold shadow-sm">
                ë¹„íšŒì›ìœ¼ë¡œ ìƒë‹´ ê¸°ë¡
              </button>
            </div>
          </div>
        `;
      }
    }

    // ëª¨ë‹¬ì—ì„œ ê³ ê° ì„ íƒ ì‹œ
    function selectCustomerAndClose(rowElement) {
      // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì„ íƒëœ ê³ ê°ì˜ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ
      // ë¶€ëª¨ ì°½ì˜ ìƒë‹´ ë“±ë¡ í¼ì„ ì±„ìš°ëŠ” ë¡œì§ì´ í•„ìš”í•©ë‹ˆë‹¤.
      // ì˜ˆ: document.getElementById('nonMemberName').value = rowElement.cells[3].textContent;
      // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ customer_view.htmlë¡œ ì´ë™í•©ë‹ˆë‹¤.
      alert(`'${rowElement.cells[3].textContent}' ê³ ê°ë‹˜ì˜ ìƒë‹´ì„ ì‹œì‘í•©ë‹ˆë‹¤.`);
      window.location.href='customer_view.html';
      closeSearchModal();
    }

    // ëª¨ë‹¬ ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    modalSearchBtn.addEventListener('click', executeModalSearch);

    // âœ… ì „í™”ë²ˆí˜¸ ë§ˆìŠ¤í‚¹ í•¨ìˆ˜
    function maskPhoneNumber(phone) {
      if (!phone || typeof phone !== 'string') {
        return '';
      }
      const parts = phone.split('-');
      if (parts.length === 3) {
        parts[1] = '****';
        return parts.join('-');
      }
      return phone;
    }

    // âœ… ëª¨ë‹¬ ë‚´ ê¸°ì—…ëª… ê²€ìƒ‰ ìë™ì™„ì„± ë¡œì§
    const modalSuggestionsContainer = document.getElementById("modal-company-suggestions");
    let modalHighlightedIndex = -1;

    function modalHighlightItem(index) {
        const items = modalSuggestionsContainer.querySelectorAll("div");
        items.forEach((item, i) => {
            item.classList.toggle("bg-gray-100", i === index);
            if (i === index) {
                item.scrollIntoView({ block: 'nearest' });
            }
        });
    }

    modalCompanyNameInput.addEventListener("input", () => {
        let currentModalCompanies = []; // í˜„ì¬ í•„í„°ë§ëœ íšŒì‚¬ ëª©ë¡ì„ ì €ì¥
        const query = modalCompanyNameInput.value.trim().toLowerCase();
        if (query.length === 0) {
            modalSuggestionsContainer.classList.add("hidden");
            return;
        }

        const filteredCompanies = companyDB.filter(c => c.name.toLowerCase().includes(query) || c.code.toLowerCase().includes(query));
        currentModalCompanies = filteredCompanies; // í•„í„°ë§ëœ ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— í• ë‹¹
        modalSuggestionsContainer.innerHTML = "";
        filteredCompanies.forEach(company => {
            const item = document.createElement("div");
            item.className = "px-4 py-2 hover:bg-gray-100 cursor-pointer";
            item.textContent = `${company.name} (${company.code})`;
            // blur ì´ë²¤íŠ¸ë³´ë‹¤ clickì´ ë¨¼ì € ì‹¤í–‰ë˜ë„ë¡ mousedown ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
            item.addEventListener("mousedown", (e) => { // Add e parameter
                modalCompanyNameInput.value = `${company.name} (${company.code})`; // ì…ë ¥ì°½ì— 'ê¸°ì—…ëª… (ê¸°ì—…ì½”ë“œ)' í˜•ì‹ìœ¼ë¡œ ì„¤ì •
                modalSuggestionsContainer.classList.add("hidden");
                e.preventDefault(); // Prevent blur from firing immediately and potentially clearing input
            });
            modalSuggestionsContainer.appendChild(item);
        });

        if (filteredCompanies.length > 0) {
            modalSuggestionsContainer.classList.remove("hidden");
        } else {
            modalSuggestionsContainer.classList.add("hidden");
        }
        modalHighlightedIndex = -1;
    });

    // ì…ë ¥ì°½ì—ì„œ í¬ì»¤ìŠ¤ê°€ ë²—ì–´ë‚¬ì„ ë•Œ(blur) ìë™ì™„ì„± ëª©ë¡ì„ ìˆ¨ê¹ë‹ˆë‹¤.
    // setTimeoutì„ ì‚¬ìš©í•˜ì—¬ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë¨¼ì € ì²˜ë¦¬ë  ì‹œê°„ì„ í™•ë³´í•©ë‹ˆë‹¤.
    modalCompanyNameInput.addEventListener("blur", () => {
        setTimeout(() => {
            modalSuggestionsContainer.classList.add("hidden");
        }, 150); // 150ms ì§€ì—°
    });

    modalCompanyNameInput.addEventListener("keydown", (e) => {
        const items = modalSuggestionsContainer.querySelectorAll("div");
        const suggestionsVisible = !modalSuggestionsContainer.classList.contains("hidden") && items.length > 0;

        if (e.key === "Enter") {
            e.preventDefault(); // Prevent default form submission

            if (suggestionsVisible && modalHighlightedIndex > -1 && items[modalHighlightedIndex]) {
                // If a suggestion is highlighted, trigger its mousedown event to select it.
                items[modalHighlightedIndex].dispatchEvent(new MouseEvent('mousedown', { bubbles: true }));
            }
            modalSuggestionsContainer.classList.add("hidden"); // Hide suggestions after selection or if no selection was made.
        } else if (suggestionsVisible) { // Only handle arrow keys and escape if suggestions are visible
            switch (e.key) {
                case "ArrowDown":
                e.preventDefault();
                modalHighlightedIndex = (modalHighlightedIndex + 1) % items.length;
                modalHighlightItem(modalHighlightedIndex);
                break;
            case "ArrowUp":
                e.preventDefault();
                modalHighlightedIndex = (modalHighlightedIndex - 1 + items.length) % items.length;
                modalHighlightItem(modalHighlightedIndex);
                break;
            case "Escape":
                modalSuggestionsContainer.classList.add("hidden");
                break;
            }
        }
    });

  </script>
</body>
</html>
