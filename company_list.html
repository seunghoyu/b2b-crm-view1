<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>B2B CRM 기업 목록</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 h-screen flex overflow-hidden">
  <!-- ✅ 좌측 사이드 메뉴 (공통) -->
  <aside class="w-[230px] bg-blue-800 text-white flex-shrink-0">
    <a href="b2b_dashboard_tailwind.html" class="block p-5 text-lg font-semibold border-b border-blue-700 hover:bg-blue-700 transition">
      B2B CRM 메뉴
    </a>

    <nav class="p-3 space-y-2">
      <!-- 통합메뉴 -->
      <div>
        <button id="menuToggle1" class="w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-blue-700 transition">
          <span>발송관리</span>
          <span>▼</span>
        </button>
        <div id="menu1" class="hidden ml-4 mt-2 space-y-1 text-sm">
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">SMS 발송</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">E-Mail 발송</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">알림톡 발송</a>
        </div>
      </div>

      <!-- 관리메뉴 -->
      <div>
        <button id="menuToggle2" class="w-full flex justify-between items-center px-4 py-2 rounded-lg hover:bg-blue-700 transition">
          <span>관리메뉴</span>
          <span>▼</span>
        </button>
        <div id="menu2" class="ml-4 mt-2 space-y-1 text-sm">
          <a href="b2b_dashboard_tailwind.html" class="block px-3 py-1 hover:bg-blue-700 rounded">상담 현황</a>
          <a href="company_list.html" class="block px-3 py-1 bg-blue-900 rounded font-semibold">기업 목록</a>
          <a href="customer_list.html" class="block px-3 py-1 hover:bg-blue-700 rounded">고객 목록</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">수강시간 조회</a>
          <a href="#" class="block px-3 py-1 hover:bg-blue-700 rounded">학습상담·CS 관리</a>
          <a href="customer_registration.html" class="block px-3 py-1 hover:bg-blue-700 rounded">신규 고객 등록</a>
        </div>
      </div>
    </nav>
  </aside>

  <!-- ✅ 메인 영역 -->
  <div class="flex-1 flex flex-col">
    <!-- 상단 헤더 -->
    <header class="bg-blue-700 text-white py-4 shadow">
      <div class="w-full px-10 flex justify-between items-center">
        <h1 class="text-2xl font-semibold">기업 목록</h1>
        <span class="text-sm opacity-90">관리자용</span>
      </div>
    </header>

    <main class="flex-1 w-full px-10 py-8 overflow-y-auto">
      <!-- 테이블 영역 -->
      <section class="bg-white p-6 rounded-xl shadow overflow-x-auto">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-gray-800">전체 기업</h2>
          <div class="flex items-center space-x-4">
            <button onclick="alert('엑셀 파일 일괄 등록 기능이 실행됩니다.')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold">
              Excel파일 일괄등록
            </button>
            <button onclick="alert('신규 기업 등록 페이지로 이동합니다.')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold">
              신규 기업 등록
            </button>
            <span id="count" class="text-sm text-gray-500"></span>
          </div>
        </div>

        <table class="w-full table-auto border-collapse text-sm text-gray-700">
          <thead>
            <tr class="bg-gray-100 border-b text-left text-gray-600">
              <th class="p-4">회사명</th>
              <th class="p-4">기업 담당자</th>
              <th class="p-4">기업 운영자</th>
              <th class="p-4">회사코드</th>
              <th class="p-4">교육진행현황</th>
              <th class="p-4">등록일</th>
              <th class="p-4">홈페이지 바로가기</th>
            </tr>
          </thead>
          <tbody id="table-body"></tbody>
        </table>

        <div class="mt-6 flex justify-center">
            <button id="load-more" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition font-semibold">
                더보기
            </button>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ✅ 사이드메뉴 토글
    const menuToggle1 = document.getElementById("menuToggle1");
    const menu1 = document.getElementById("menu1");
    const menuToggle2 = document.getElementById("menuToggle2");
    const menu2 = document.getElementById("menu2");

    menuToggle1.addEventListener("click", () => menu1.classList.toggle("hidden"));
    menuToggle2.addEventListener("click", () => menu2.classList.toggle("hidden"));
    menu2.classList.remove("hidden"); // 관리메뉴는 기본으로 열어둠

    // ✅ 기업 목록 더미 데이터 (30개)
    const dummyCompanies = Array.from({ length: 30 }, (_, i) => {
        const companies = ["삼성전자", "SK하이닉스", "LG화학", "현대자동차", "카카오", "네이버", "CJ푸드빌", "대한항공", "다우오피스", "포스코"];
        const names = ["김담당", "이운영", "박책임", "최선임", "정주임", "강대리", "조과장", "윤차장", "장부장", "임팀장"];
        const statuses = ["진행중", "종료", "예정", "테스트용", "삭제요청"];
        const company = companies[i % companies.length];

        const companyCodesMap = {
            "삼성전자": "samsung",
            "SK하이닉스": "skhynix",
            "LG화학": "lgchem",
            "현대자동차": "hyundai",
            "카카오": "kakao",
            "네이버": "naver",
            "CJ푸드빌": "cjfood",
            "대한항공": "koreanair",
            "다우오피스": "daou",
            "포스코": "posco"
        };
        
        return {
            companyName: company,
            contactPerson: names[i % names.length],
            operator: names[(i + 1) % names.length],
            companyCode: `${companyCodesMap[company]}${i > 9 ? Math.floor(i/10) : ''}`, // samsung, samsung1, samsung2 ...
            status: statuses[i % statuses.length],
            regDate: `2025-10-${String(30 - i).padStart(2, '0')} ${String(i % 24).padStart(2, '0')}:${String(i % 60).padStart(2, '0')}:${String(i % 60).padStart(2, '0')}`,
        };
    });

    const tbody = document.getElementById("table-body");
    const loadMoreBtn = document.getElementById("load-more");
    const itemsPerPage = 10;
    let itemsShown = 0;

    function getStatusClass(status) {
        if (status === '진행중') return 'text-red-600 font-semibold';
        if (status === '종료') return 'text-gray-500';
        if (status === '예정') return 'text-blue-600';
        return 'text-gray-700';
    }

    function renderTable() {
        const toShow = dummyCompanies.slice(itemsShown, itemsShown + itemsPerPage);

        toShow.forEach((d) => {
            const row = document.createElement("tr");
            row.className = "border-b hover:bg-blue-50 transition";
            row.innerHTML = `
                <td class='p-4 font-medium'>${d.companyName}</td>
                <td class='p-4'>${d.contactPerson}</td>
                <td class='p-4'>${d.operator}</td>
                <td class='p-4'>${d.companyCode}</td>
                <td class='p-4 ${getStatusClass(d.status)}'>${d.status}</td>
                <td class='p-4'>${d.regDate}</td>
                <td class='p-4 space-x-2'>
                    <a href="#" onclick="alert('${d.companyName} 홈페이지로 이동합니다.')" class="text-blue-600 hover:underline">바로가기</a>
                    <a href="#" onclick="alert('${d.companyName} 관리자로 로그인합니다.')" class="text-gray-600 hover:underline">관리자로 로그인</a>
                </td>`;
            tbody.appendChild(row);
        });

        itemsShown += toShow.length;

        if (itemsShown >= dummyCompanies.length) {
            loadMoreBtn.style.display = 'none';
        }
    }

    loadMoreBtn.addEventListener('click', renderTable);

    // 초기 데이터 로드
    renderTable();
    document.getElementById("count").innerText = `총 ${dummyCompanies.length}건`;

  </script>
</body>

</html>
